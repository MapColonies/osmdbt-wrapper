{{- $releaseName := .Release.Name -}}
{{- $chartName := include "osmdbt-wrapper.name" . -}}
{{- if .Values.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ $releaseName }}-{{ $chartName }}-configmap
data:
  {{- with .Values.dbConfig.sslAuth }}
  POSTGRES_ENABLE_SSL_AUTH: {{ .enabled | quote }}
  {{- if .enabled }}
  POSTGRES_CERTS_MOUNT_PATH: {{ .mountPath | quote }}
  {{- end }}
  {{- end }}
  {{- with .Values.objectStrorageConfig }}
  OBJECT_STORAGE_ENDPOINT: {{ .endpoint | quote }}
  OBJECT_STORAGE_BUCKET_NAME: {{ .bucketName | quote }}
  OBJECT_STORAGE_ACL: {{ .acl | quote }}
  {{- end }}
  APP_CHANGES_DIR: {{ .Values.application.changesDir | default "/tmp" | quote }}
  APP_DIFF_MAX_CHANGES: {{ .Values.application.diffMaxChanges | quote }}
{{- end -}}
